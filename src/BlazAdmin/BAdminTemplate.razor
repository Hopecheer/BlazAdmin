@inherits BAdminTemplateBase
<BPopup></BPopup>
@if (!isLogined)
{
    if (LoginPage != null)
    {
        @LoginPage
    }
    else
    {
        <BLogin DefaultUser="DefaultUser"></BLogin>
    }
}
else
{
    <BLayout WestWidth="@NavigationWidth">
        <West>
            <BSimpleCard Title="@NavigationTitle" Style="background-color:#20222A;" Shadow="@ShadowShowType.Never">
                <BMenu Mode="@MenuMode.Vertical" @bind-ActiveItem="@CurrentMenu" DefaultActive="@defaultMenuIndex" BackgroundColor="#20222A" ActiveTextColor="#FFFFFF" TextColor="rgba(255,255,255,.7)" HoverColor="#434A50">
                    @foreach (var menu in Menus)
                    {
                        if (menu.Children != null && menu.Children.Any())
                        {
                            <BSubMenu Label="@menu.Label">
                                @foreach (var children in menu.Children)
                                {
                                    <BMenuItem Route="@children.Route" OnRouteChanging="OnRouteChanging" Index="@children.Name" Model="@children">@children.Label</BMenuItem>
                                }
                            </BSubMenu>
                        }
                        else
                        {
                            <BMenuItem Route="@menu.Route" OnRouteChanging="OnRouteChanging" Index="@menu.Name" Model="@menu">@menu.Label</BMenuItem>
                        }
                    }
                </BMenu>
            </BSimpleCard>
        </West>
        <Center>
            <BTab Type="@TabType.Card" IsClosable="true" ActiveTabName="@ActiveTabName">
                <BTabPanel DataSource="Tabs" Content="x => x.Content" Title="x => x.Title" Name="x => x.Name"></BTabPanel>
            </BTab>
        </Center>
    </BLayout>
}